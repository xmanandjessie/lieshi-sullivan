var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),PopView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.show=function(){UIManager.instance.popLayer.addChild(this),this.touchEnabled=!0},e.prototype.hide=function(){UIManager.instance.popLayer.removeChild(this)},e.prototype.setData=function(t){void 0===t&&(t=null),this.data=t},e}(egret.DisplayObjectContainer);__reflect(PopView.prototype,"PopView");var GameDispatcher=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e}(egret.EventDispatcher);__reflect(GameDispatcher.prototype,"GameDispatcher");var CustomButton=function(t){function e(e,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var o=t.call(this)||this;return o.bg=Global.createBitmapByName(e),i&&(o.bg.width=i),n&&(o.bg.height=n),o.addChild(o.bg),o.label=new egret.TextField,o.label.fontFamily="微软雅黑",o.label.size=40,o.label.textColor=16777215,o.label.width=o.bg.width,o.label.height=o.bg.height-5,o.label.textAlign=egret.HorizontalAlign.CENTER,o.label.verticalAlign=egret.VerticalAlign.MIDDLE,o.addChild(o.label),o.touchEnabled=!0,Global.setBut(o),o}return __extends(e,t),Object.defineProperty(e.prototype,"text",{get:function(){return this.label.text},set:function(t){this.label.text=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{set:function(t){t?(this.alpha=1,this.touchEnabled=!0):(this.alpha=.68,this.touchEnabled=!1)},enumerable:!0,configurable:!0}),e}(egret.DisplayObjectContainer);__reflect(CustomButton.prototype,"CustomButton");var CustomCheckBox=function(t){function e(e,i,n){void 0===n&&(n=0);var o=t.call(this)||this;return o.type=e,o.text=i,o.select=n,o.init(),o}return __extends(e,t),e.prototype.init=function(){console.log(),this.icon=Global.createBitmapByName("cbx_"+this.type+"_"+this.select+"_png"),this.addChild(this.icon),this.txtContent=new egret.TextField,this.txtContent.x=50,this.txtContent.text=this.text,this.addChild(this.txtContent),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.clickHandler,this)},e.prototype.clickHandler=function(){this.change(),this.dispatchEventWith(egret.Event.CHANGE)},e.prototype.setSelect=function(t){this.select=t,this.icon.texture=RES.getRes("cbx_"+this.type+"_"+this.select+"_png")},e.prototype.change=function(){this.setSelect(0==this.select?1:0)},e}(egret.DisplayObjectContainer);__reflect(CustomCheckBox.prototype,"CustomCheckBox");var CustomScrollView=function(t){function e(e,i,n){void 0===e&&(e=null),void 0===i&&(i=0),void 0===n&&(n=0);var o=t.call(this,e)||this;return o.offset=i,o.gap=n,o}return __extends(e,t),e.prototype.setScrollLeft=function(e,i){if(void 0===i&&(i=0),console.log(e,this.getMaxScrollLeft()),e<-50+this.gap/2)e=-50;else if(e>50+this.getMaxScrollLeft()-this.gap/2)e=50+this.getMaxScrollLeft();else{var n=Math.round((e-50)/this.gap);console.log(n),e=n*this.gap}t.prototype.setScrollLeft.call(this,e,i)},e}(egret.ScrollView);__reflect(CustomScrollView.prototype,"CustomScrollView");var CustomTabbar=function(t){function e(e,i,n){for(var o=t.call(this)||this,a=0;e>a;a++){var r=Global.createBitmapByName("tabbar_"+(a+1)+"_2_png");r.x=295,r.y=115,o.addChild(r)}return o}return __extends(e,t),e}(egret.DisplayObjectContainer);__reflect(CustomTabbar.prototype,"CustomTabbar");var CustomTabButton=function(t){function e(e,i,n,o){var a=t.call(this)||this;return a._select=!1,a.w=i,a.h=n,a.bg=new egret.Shape,a.bg.graphics.beginFill(1600721),a.bg.graphics.drawRect(0,0,i,n),a.bg.graphics.endFill(),a.addChild(a.bg),a.txtLable=new egret.TextField,a.txtLable.text=e,a.txtLable.size=o,a.txtLable.x=0,a.txtLable.y=0,a.txtLable.width=i,a.txtLable.height=n,a.txtLable.textAlign="center",a.txtLable.verticalAlign=egret.VerticalAlign.MIDDLE,a.txtLable.textColor=16777215,a.addChild(a.txtLable),a.touchEnabled=!0,a}return __extends(e,t),Object.defineProperty(e.prototype,"select",{get:function(){return this._select},set:function(t){this._select=t,this._select?(this.txtLable.textColor=16777215,this.bg.graphics.clear(),this.bg.graphics.beginFill(1600721),this.bg.graphics.drawRect(0,0,this.w,this.h),this.bg.graphics.endFill()):(this.txtLable.textColor=0,this.bg.graphics.clear(),this.bg.graphics.beginFill(16777215),this.bg.graphics.drawRect(0,0,this.w,this.h),this.bg.graphics.endFill())},enumerable:!0,configurable:!0}),e}(egret.DisplayObjectContainer);__reflect(CustomTabButton.prototype,"CustomTabButton");var HTMLText=function(){function t(){this._fontSize=40;var t=document.getElementById("gameDiv");this.p=document.createElement("p"),t.appendChild(this.p),this.p.style.border="0px",this.p.style.backgroundColor="transparent",this.p.style.position="absolute",this.p.style.fontSize=this.fontSize+"px",this.p.style.display="none",this.p.style.color="#000000",this.p.style.textAlign="center"}return Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=t,this.p.style.fontSize=this._fontSize+"px"},enumerable:!0,configurable:!0}),t.prototype.setValue=function(t){this.p.style.display="inline",this.p.innerHTML=t},t.prototype.setPosition=function(t,e,i,n){var o=document.body.clientWidth/StageUtils.SW,a=document.body.clientHeight/StageUtils.SH;this.p.style.left=t*o+"px",this.p.style.top=e*a-this.fontSize+"px",this.p.style.width=i*o+"px",this.p.style.height=n*a+"px",this.p.style.display="inline"},t.prototype.show=function(){this.p&&(this.p.style.display="inline")},t.prototype.hide=function(){this.p&&(this.p.style.display="none")},t}();__reflect(HTMLText.prototype,"HTMLText");var QRCode=function(){function t(t){var e=document.getElementById("gameDiv");this.htmlCode=document.createElement("img"),this.htmlCode.src=t,this.htmlCode.style.position="absolute",this.htmlCode.style.display="none",e.appendChild(this.htmlCode)}return t.prototype.showHtmlCode=function(){this.htmlCode&&(this.htmlCode.style.display="inline")},t.prototype.hideHtmlCode=function(){this.htmlCode&&(this.htmlCode.style.display="none")},t.prototype.setPosition=function(t,e,i,n){if(null!=this.htmlCode)if(document.body.clientWidth<document.body.clientHeight){var o=document.body.clientWidth/StageUtils.SW,a=document.body.clientHeight/StageUtils.SH;this.htmlCode.style.width=i*o+"px",this.htmlCode.style.height=n*a+"px",this.htmlCode.style.left=t*o+"px",this.htmlCode.style.top=e*a+"px"}else{var o=document.body.clientWidth/StageUtils.SH,a=document.body.clientHeight/StageUtils.SW;this.htmlCode.style.width=n*o+"px",this.htmlCode.style.height=i*a+"px",this.htmlCode.style.top=(StageUtils.SW-t-i)*a+"px",this.htmlCode.style.left=e*o+"px"}},t.prototype.destroy=function(){this.htmlCode&&(this.htmlCode.parentNode.removeChild(this.htmlCode),this.htmlCode=null)},t}();__reflect(QRCode.prototype,"QRCode");var PopManager=function(){function PopManager(){}return PopManager.showPop=function(pop,data){void 0===data&&(data=null);var view=PopManager.popDic[pop];view?view.setData(data):(view=eval("new "+pop+"()"),view&&view.setData(data),PopManager.popDic[pop]=view),view.show()},PopManager.hidePop=function(t){var e=PopManager.popDic[t];e?(e.hide(),delete PopManager.popDic[t]):console.log(t+":不存在")},PopManager.popDic={},PopManager}();__reflect(PopManager.prototype,"PopManager");var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){StageUtils.registStage(this.stage),this.addChild(UIManager.instance),this.getData(),this.createGameScene()},e.prototype.createGameScene=function(){e.openid?e.other&&e.other!=e.openid?Global.post("info",{other:e.other}).then(function(t){t&&2e4==t.code&&t.data?PopManager.showPop("ShareLandPop",t.data):PopManager.showPop("ErrorPop")}):UIManager.instance.initSelf():PopManager.showPop("ErrorPop")},e.prototype.getData=function(){var t=Global.getQueryString("openId"),i=Global.getQueryString("other");t&&"null"!=t&&"undefined"!=t&&(e.openid=t),i&&"null"!=i&&"undefined"!=t&&(e.other=i)},e.ROOT="http://als.ha0y.cn/wechat/game/",e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var AudioManager=function(){function t(){}return t.playEffect=function(t){var e=RES.getRes(t);e.play(0,1)},t}();__reflect(AudioManager.prototype,"AudioManager");var CustomImage=function(t){function e(e,i,n){void 0===i&&(i=!0),void 0===n&&(n=null);var o=t.call(this)||this;return o.url=e,o.isEase=i,o.compFunc=n,o.loadBg(),o}return __extends(e,t),e.prototype.reload=function(t,e){void 0===e&&(e=!1),this.url!=t&&(this.url=t,this.isEase=e,this.loadBg())},e.prototype.loadBg=function(){RES.getResByUrl(this.url,this.onLoadComplete,this,RES.ResourceItem.TYPE_IMAGE)},e.prototype.onLoadComplete=function(t){this.texture=t,this.isEase&&(this.alpha=0,egret.Tween.get(this).to({alpha:1},1e3)),this.compFunc&&this.compFunc()},e}(egret.Bitmap);__reflect(CustomImage.prototype,"CustomImage");var ErrorCode=function(){function t(){}return t.TIME_OUT=999,t.NOT_FOUND=404,t.SYSTEM_ERROR=100,t.TICKET_TIME_OUT=1,t.RECEIVED_SELF=2,t.RECEIVED_OTHER=3,t.RECEIVED_ERROR=4,t}();__reflect(ErrorCode.prototype,"ErrorCode");var UIManager=function(t){function e(){var e=t.call(this)||this;return e.initLayer(),e}return __extends(e,t),Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.initLayer=function(){this.mainUILayer=new egret.DisplayObjectContainer,this.addChild(this.mainUILayer),this.popLayer=new egret.DisplayObjectContainer,this.addChild(this.popLayer),this.topLayer=new egret.DisplayObjectContainer,this.addChild(this.topLayer)},e.prototype.initSelf=function(){Global.post("info",{}).then(function(t){t&&2e4==t.code&&t.data?t.data.info.length>=8?PopManager.showPop("SelfEndPop",t.data):1==t.data.iscard?PopManager.showPop("SelfPop",t.data):PopManager.showPop("StartPop",t.data):PopManager.showPop("ErrorPop")})},e}(egret.DisplayObjectContainer);__reflect(UIManager.prototype,"UIManager");var Global=function(){function t(){}return t.createBitmapByRes=function(t,e){var i=new egret.Bitmap,n=RES.getRes(t);return console.log("name::"+e+"::"+t),i.texture=n.getTexture(e),i},t.createBitmapByName=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var n=new egret.Bitmap,o=RES.getRes(t);return n.texture=o,n.x=e,n.y=i,n},t.fadeIn=function(e,i,n,o){void 0===i&&(i=0),void 0===n&&(n=500),void 0===o&&(o=1),t.tweenFrom(e,i,n,0,0,o,egret.Ease.cubicOut)},t.fadeOut=function(e,i,n,o){void 0===i&&(i=0),void 0===n&&(n=500),void 0===o&&(o=1),t.tweenToHide(e,i,n,0,0,o,egret.Ease.cubicOut)},t.zoomIn=function(e,i,n,o){void 0===i&&(i=0),void 0===n&&(n=500),void 0===o&&(o=.6),t.tweenFrom(e,i,n,0,0,o,egret.Ease.backOut)},t.zoomOut=function(e,i,n,o){void 0===i&&(i=0),void 0===n&&(n=500),void 0===o&&(o=1.5),t.tweenToHide(e,i,n,0,0,o,egret.Ease.cubicIn)},t.tweenToHide=function(t,e,i,n,o,a,r,s){void 0===s&&(s=0);var l=egret.Tween.get(t),h=t.x,c=t.y;h+=n,c+=o,l.wait(e),l.to({alpha:s,scaleX:a,scaleY:a,x:h,y:c},i,r),l.call(function(){t.parent&&t.parent.removeChild(t)})},t.tweenTo=function(t,e,i,n,o,a,r,s){void 0===a&&(a=1),void 0===r&&(r=1),void 0===s&&(s=egret.Ease.cubicOut);var l=egret.Tween.get(t);l.wait(e),s?l.to({alpha:a,scaleX:r,scaleY:r,x:n,y:o},i,s):l.to({alpha:a,scaleX:r,scaleY:r,x:n,y:o},i)},t.tweenFrom=function(t,e,i,n,o,a,r){var s=egret.Tween.get(t),l=t.x,h=t.y;t.scaleX=t.scaleY=a,t.x=l+n,t.y=h+o,s.wait(e),s.to({alpha:1,scaleX:1,scaleY:1,x:l,y:h},i,r)},t.createMc=function(t,e,i){var n=RES.getRes(t),o=RES.getRes(e),a=new egret.MovieClipDataFactory(n,o),r=new egret.MovieClip(a.generateMovieClipData(i));return r},t.remove=function(t){t&&t.parent&&t.parent.removeChild(t)},t.setBut=function(t){t&&(t.touchEnabled=!0,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){t.alpha=.68},t),t.addEventListener(egret.TouchEvent.TOUCH_END,function(){t.alpha=1},t),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,function(){t.alpha=1},t))},t.getArrayItems=function(t,e){var i=new Array;for(var n in t)i.push(t[n]);for(var o=new Array,a=0;e>a&&i.length>0;a++){var r=Math.floor(Math.random()*i.length);o[a]=i[r],i.splice(r,1)}return o},t.errorTips=function(t){t&&("invalidticket"==t.reason?PopManager.showPop("ErrorPop",ErrorCode.TICKET_TIME_OUT):"invalidticketparam"==t.reason?PopManager.showPop("ErrorPop",ErrorCode.NOT_FOUND):PopManager.showPop("ErrorPop",ErrorCode.SYSTEM_ERROR))},t.showTips=function(t){Message.show(t)},t.getQueryString=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(e);return null!=i?decodeURIComponent(i[2]):null},t.setItem=function(t,e){void 0!=e&&null!=e&&t&&localStorage.setItem("page_bridge_"+t,JSON.stringify(e))},t.getItem=function(t){if(t){var e;if(e=localStorage.getItem("page_bridge_"+t),void 0!=e&&null!=e&&""!=e)return JSON.parse(e)}},t.isinweixin=function(){return/MicroMessenger/.test(window.navigator.userAgent)?!0:!1},t.isinzhifubao=function(){return/AlipayClient/.test(window.navigator.userAgent)?!0:!1},t.copyToClipboard=function(t){try{var e=document.createElement("input");e.readOnly=!0,e.value=t,document.body.appendChild(e),e.select(),e.setSelectionRange(0,e.value.length),document.execCommand("Copy"),document.body.removeChild(e)}catch(i){console.log(i),console.log("copy error")}},t.post=function(t,e){return e&&(e.openid||(e.openid=Main.openid)),new Promise(function(i,n){$.ajax({url:Main.ROOT+t,data:e,success:function(t){i(t)},error:function(){PopManager.showPop("ErrorPop")},timeout:8e3,dataType:"json",async:!0,type:"POST",complete:function(t,e){"timeout"==e&&PopManager.showPop("ErrorPop")}})})},t.grayMatrix=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],t.grayFlilter=[new egret.ColorMatrixFilter(t.grayMatrix)],t.grayFlilter1=[new egret.ColorMatrixFilter([.1,.1,0,0,200,.1,.1,0,0,0,.1,.1,0,0,0,0,0,0,1,0])],t.DM_Filter=[new egret.GlowFilter(1348416,.5,30,30,2,1)],t.GZ_Filter=[new egret.GlowFilter(11588940,.5,30,30,2,1)],t.JZ_Filter=[new egret.GlowFilter(13944964,.5,30,30,2,1)],t.RP_Filter=[new egret.GlowFilter(5029887,.5,30,30,2,1)],t.QP_Filter=[new egret.GlowFilter(10658466,.5,30,30,2,1)],t.AI_Filter=[new egret.GlowFilter(13369344,.5,30,30,2,1)],t.posList=[[300,175,334,271,100,232,84,125],[132,242,270,376,406,530,567,693]],t.idList=["9612855","9509739","9612860","9548973","9612864","9548991","9509770"],t}();__reflect(Global.prototype,"Global");var Message=function(t){function e(){var e=t.call(this)||this;return e.bg=Global.createBitmapByName("message_bg_png"),e.bg.y=-10,e.addChild(e.bg),e.txtStr=new egret.TextField,e.txtStr.textColor=16662101,e.txtStr.width=StageUtils.SW,e.txtStr.textAlign=egret.HorizontalAlign.CENTER,e.txtStr.stroke=1,e.txtStr.strokeColor=16777215,e.addChild(e.txtStr),e}return __extends(e,t),e.prototype.show=function(t){this.txtStr.text=t,this.bg.width=this.txtStr.textWidth+50,this.bg.height=this.txtStr.textHeight+20,this.bg.x=StageUtils.SW-this.bg.width>>1,this.y=StageUtils.CH-100,this.alpha=1,egret.Tween.get(this).wait(3e3).to({y:this.y-100,alpha:0},1e3,egret.Ease.quadIn).call(this.tweenEnd,this)},e.prototype.tweenEnd=function(){this.parent&&(this.parent.removeChild(this),e.pool.push(this))},e.show=function(t){var i;i=e.pool.length>0?e.pool.pop():new e,i&&(i.show(t),UIManager.instance.topLayer.addChild(i))},e.pool=[],e}(egret.DisplayObjectContainer);__reflect(Message.prototype,"Message");var StageUtils=function(){function t(){}return t.registStage=function(e){t.stage=e,t.SW=e.stageWidth,t.SH=e.stageHeight,t.CW=t.SW>>1,t.CH=t.SH>>1,t.LW=window.innerWidth,t.LH=window.innerHeight},t.centerInParentX=function(e,i){void 0===i&&(i=null),e&&(i?e.x=i.width-e.width>>1:e.x=t.stage.stageWidth-e.width>>1)},t.centerInParentY=function(e,i){void 0===i&&(i=null),e&&(i?e.y=i.height-e.height>>1:e.y=t.stage.stageHeight-e.height>>1)},t.centerInParent=function(e,i,n,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===o&&(o=null),e&&(o?(e.x=(o.width-e.width>>1)+i,e.y=(o.height-e.height>>1)+n):(e.x=(t.stage.stageWidth-e.width>>1)+i,e.y=(t.stage.stageHeight-e.height>>1)+n))},t}();__reflect(StageUtils.prototype,"StageUtils");var DescPop=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.show=function(){var t=new egret.Shape;t.graphics.beginFill(0,.7),t.graphics.drawRect(0,0,StageUtils.stage.stageWidth,StageUtils.stage.stageHeight),t.graphics.endFill(),this.addChildAt(t,0),t.alpha=0,Global.fadeIn(t),UIManager.instance.popLayer.addChild(this),this.touchEnabled=!0},e.prototype.setData=function(t){var e=new CustomImage("resource/assets/asyn/desc/desc"+t+".png",!0,function(){e.x=StageUtils.SW-e.width>>1,e.y=StageUtils.SH-e.height>>1});this.addChild(e);var i=new CustomImage("resource/assets/asyn/close.png",!0,function(){i.x=528,i.y=130});this.addChild(i),Global.setBut(i),i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){PopManager.hidePop("DescPop")},this)},e}(PopView);__reflect(DescPop.prototype,"DescPop");var ErrorPop=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setData=function(){var t=new CustomImage("resource/assets/error.jpg",!0,function(){t.width=StageUtils.SW,t.height=StageUtils.SH});this.addChild(t)},e}(PopView);__reflect(ErrorPop.prototype,"ErrorPop");var SelfEndPop=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setData=function(t){var e=this;this.container=new egret.DisplayObjectContainer;var i=new egret.ScrollView;i.setContent(this.container),i.horizontalScrollPolicy="off",i.scrollSpeed=.5,this.addChild(i),i.x=0,i.y=0,i.width=StageUtils.SW,i.height=StageUtils.SH;var n=new egret.Shape;n.graphics.beginFill(0),n.graphics.drawRect(0,0,StageUtils.stage.stageWidth,1970),n.graphics.endFill(),this.container.addChild(n);var o=new CustomImage("resource/assets/asyn/reward/bg.png",!0,function(){o.x=StageUtils.SW-o.width>>1,o.y=50});this.container.addChild(o);var a=new CustomImage("resource/assets/asyn/arrow.png",!0,function(){a.x=StageUtils.SW-a.width>>1});a.y=StageUtils.SH-40,this.container.addChild(a),egret.Tween.get(a,{loop:!0}).to({y:StageUtils.SH-50},500).to({y:StageUtils.SH-40},500);for(var r=0;6>r;r++){var s=new RateItem;s.setData(r+1,t.coups),s.x=StageUtils.SW-556>>1,s.y=840+190*r,this.container.addChild(s)}if(1==t.isprize){var l=new CustomImage("resource/assets/asyn/reward/reward1.png",!0,function(){l.x=StageUtils.SW-l.width>>1,l.y=190});this.container.addChild(l),Message.show("您已领取过该兑换券")}else Global.post("prize",{}).then(function(i){if(i)if(2e4==i.code){var n=new CustomImage("resource/assets/asyn/reward/reward1.png",!0,function(){n.x=StageUtils.SW-n.width>>1,n.y=190});e.container.addChild(n),e.checkStataus(t)}else{if("你已领取过该代金券"==i.msg){var n=new CustomImage("resource/assets/asyn/reward/reward1.png",!0,function(){n.x=StageUtils.SW-n.width>>1,n.y=190});e.container.addChild(n),e.checkStataus(t)}Message.show(i.msg)}})},e.prototype.checkStataus=function(t){var e,i=t.coups;if(i){for(var n=Global.idList[6],o=0;o<i.length;o++)n==i[o].stockid&&(e=i[o]);if(e&&"SENDED"!=e.state){var a=new CustomImage("resource/assets/asyn/rate/used.png",!0,function(){a.y=100});this.container.addChild(a)}}},e}(PopView);__reflect(SelfEndPop.prototype,"SelfEndPop");var SelfPop=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setData=function(t){this.container=new egret.DisplayObjectContainer,this.container.height=1930;var e=new egret.ScrollView;e.setContent(this.container),e.horizontalScrollPolicy="off",e.scrollSpeed=.5,this.addChild(e),e.x=0,e.y=-50,e.width=StageUtils.SW,e.height=StageUtils.SH+50;var i=new CustomImage("resource/assets/asyn/self/bg.png",!0,function(){i.width=StageUtils.SW,i.height=1970});this.container.addChild(i);var n=new CustomImage("resource/assets/asyn/self/title.png",!0,function(){n.x=StageUtils.SW-n.width>>1,n.y=80});this.container.addChild(n);var o=new MapItem("self");o.setData(t.info),this.container.addChild(o);var a=new DengItem;this.addChild(a);var r=new CustomImage("resource/assets/asyn/self/title1.png",!0,function(){r.x=StageUtils.CW,r.y=StageUtils.SH-111+r.height,egret.Tween.get(r,{loop:!0}).to({scaleX:1.2,scaleY:1.2},500,egret.Ease.backIn).to({scaleX:1,scaleY:1},500,egret.Ease.backOut)});r.anchorOffsetX=188,r.anchorOffsetY=72,this.container.addChild(r);var s=new CustomImage("resource/assets/asyn/arrow.png",!0,function(){s.x=StageUtils.SW-s.width>>1});s.y=StageUtils.SH-30,this.container.addChild(s);for(var l=0;6>l;l++){var h=new RateItem;h.setData(l+1,t.coups),h.x=StageUtils.SW-556>>1,h.y=1020+150*l,this.container.addChild(h)}egret.Tween.get(s,{loop:!0}).to({y:StageUtils.SH-50},500).to({y:StageUtils.SH-30},500),1==t.iscard||Global.post("card",{}).then(function(t){t&&2e4!=t.code&&"你已领取过该代金券"!=t.msg&&Message.show(t.msg)})},e}(PopView);__reflect(SelfPop.prototype,"SelfPop");var ShareLandPop=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.show=function(){var t=new egret.Shape;t.graphics.beginFill(0,.01),t.graphics.drawRect(0,0,StageUtils.stage.stageWidth,StageUtils.stage.stageHeight-130),t.graphics.endFill(),this.addChildAt(t,0),UIManager.instance.popLayer.addChild(this),this.touchEnabled=!0},e.prototype.setData=function(e){t.prototype.setData.call(this,e);var i=new CustomImage("resource/assets/asyn/self/bg.png",!0,function(){i.width=StageUtils.SW,i.height=1970});this.addChild(i);var n=new CustomImage("resource/assets/asyn/share/logo.png",!0,function(){n.x=30,n.y=30});this.addChild(n);var o=new MapItem("share");o.setData(e.info),this.addChild(o),this.map=o;var a=new CustomImage("resource/assets/asyn/mouse.png",!0,function(){a.x=30,a.y=700});this.addChild(a),egret.Tween.get(a,{loop:!0}).to({scaleX:1.1,scaleY:1.1,rotation:6},500,egret.Ease.backIn).to({scaleX:1,scaleY:1,rotation:0},500,egret.Ease.backOut);var r=new DengItem;this.addChild(r);var s=new CustomImage("resource/assets/asyn/share/btn_into.png",!0,function(){s.x=StageUtils.SW-s.width>>1,s.y=StageUtils.SH-100});this.addChild(s),Global.setBut(s),s.addEventListener(egret.TouchEvent.TOUCH_TAP,function(t){t.stopPropagation(),t.stopImmediatePropagation(),PopManager.hidePop("ShareLandPop"),UIManager.instance.initSelf()},this),StageUtils.stage.addEventListener("map_item_click",this.mapItemClickHandler,this)},e.prototype.mapItemClickHandler=function(t){var e=this;if(console.log(t.data),this.data){if(this.data.info)for(var i=0;i<this.data.info.length;i++)if(this.data.info[i]&&(this.data.info[i].otheropenid==Main.openid||this.data.info[i].openid==Main.openid))return void Message.show("您已帮Ta点亮拼图，每人仅限点亮一块拼图");StageUtils.stage.removeEventListener("map_item_click",this.mapItemClickHandler,this),console.log("map click");var n=t.data;Global.post("play",{other:Main.other,pid:n}).then(function(t){t&&2e4==t.code&&(e.map.updateItem(n),Message.show("成功帮助好友点亮地图，你也去试试吧~"))})}},e.prototype.hide=function(){t.prototype.hide.call(this),StageUtils.stage.removeEventListener("map_item_click",this.mapItemClickHandler,this)},e}(PopView);__reflect(ShareLandPop.prototype,"ShareLandPop");var SharePop=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.show=function(){var t=new egret.Shape;t.graphics.beginFill(0,.9),t.graphics.drawRect(0,0,StageUtils.stage.stageWidth,StageUtils.stage.stageHeight),t.graphics.endFill(),this.addChildAt(t,0),t.alpha=0,Global.fadeIn(t),UIManager.instance.popLayer.addChild(this),this.touchEnabled=!0},e.prototype.setData=function(t){var e=new CustomImage("resource/assets/asyn/share/bg.png",!0,function(){e.x=StageUtils.SW-e.width>>1,e.y=StageUtils.SH-e.height>>1});this.addChild(e),this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){PopManager.hidePop("SharePop")},this)},e}(PopView);__reflect(SharePop.prototype,"SharePop");var StartPop=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setData=function(e){t.prototype.setData.call(this,e);var i=new CustomImage("resource/assets/asyn/loading/loading_bg.jpg",!0,function(){i.width=StageUtils.SW,i.height=StageUtils.SH});this.addChild(i);var n=new CustomImage("resource/assets/asyn/loading/btn_into.png",!0,function(){n.x=StageUtils.SW-n.width>>1,n.y=StageUtils.SH-100});this.addChild(n),Global.setBut(n),n.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){PopManager.hidePop("StartPop"),PopManager.showPop("SelfPop",e)},this)},e}(PopView);__reflect(StartPop.prototype,"StartPop");var DengItem=function(t){function e(){var e=t.call(this)||this,i=new CustomImage("resource/assets/asyn/self/deng1.png",!0,function(){i.x=291,i.y=70,egret.Tween.get(i,{loop:!0}).to({y:100},2e3).to({y:70},2e3)});e.addChild(i);var n=new CustomImage("resource/assets/asyn/self/deng2.png",!0,function(){n.x=-200,n.y=800,egret.Tween.get(n,{loop:!0}).to({rotation:3},1e3).to({rotation:0},1e3),egret.Tween.get(n,{loop:!0}).to({x:StageUtils.SW,y:200},2e4).to({x:-200,y:800},0).to({},5e3)});return e.addChild(n),e}return __extends(e,t),e}(egret.DisplayObjectContainer);__reflect(DengItem.prototype,"DengItem");var MapItem=function(t){function e(e){var i=t.call(this)||this;return i.type=e,i}return __extends(e,t),e.prototype.setData=function(t){for(var e=0;8>e;e++){var i=!1;if(t)for(var n=t.length,o=0;n>o;o++){var a=t[o];if(a&&a.pic==e+1){this.addItem(a.pic),i=!0;break}}i||this.addItem(e+1,0)}},e.prototype.addItem=function(t,e){var i=this;void 0===e&&(e=1);var n=new CustomImage("resource/assets/asyn/map/map"+t+"_"+e+".png",!0,function(){n.x=Global.posList[0][t-1],n.y=Global.posList[1][t-1]});this.addChild(n),Global.setBut(n),n.addEventListener(egret.TouchEvent.TOUCH_TAP,function(n){"self"==i.type?Message.show("分享给好友，点亮全部地图"):0==e?StageUtils.stage.dispatchEventWith("map_item_click",!1,t):Message.show("这块地图已经点亮了哦~")},this)},e.prototype.updateItem=function(t){if(this.numChildren>=t){var e=this.getChildAt(t-1);e&&(e.reload("resource/assets/asyn/map/map"+t+"_1.png"),e.touchEnabled=!1)}},e}(egret.DisplayObjectContainer);__reflect(MapItem.prototype,"MapItem");var RateItem=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.setData=function(t,e){var i;if(e)for(var n=Global.idList[t-1],o=0;o<e.length;o++)n==e[o].stockid&&(i=e[o]);var a=new CustomImage("resource/assets/asyn/rate/rate"+t+".png",!0,function(){});if(this.addChild(a),i&&"SENDED"!=i.state){var r=new CustomImage("resource/assets/asyn/rate/used.png",!0,function(){});this.addChild(r)}var s=new CustomImage("resource/assets/asyn/rate/btn_share.png",!0,function(){s.x=23,s.y=92});this.addChild(s);var l=new CustomImage("resource/assets/asyn/rate/btn_desc.png",!0,function(){l.x=108,l.y=92});this.addChild(l),Global.setBut(s),Global.setBut(l),s.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){PopManager.showPop("SharePop")},this),l.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){PopManager.showPop("DescPop",t)},this)},e}(egret.DisplayObjectContainer);__reflect(RateItem.prototype,"RateItem");